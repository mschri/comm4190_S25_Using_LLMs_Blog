<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.7.31">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Miranda Schriver">
<meta name="dcterms.date" content="2025-03-23">
<meta name="description" content="Prompting Different LLMs to Solve Various Puzzle Challenges">

<title>Riddle Me This: How Good is Your Puzzle Solving, ChatGPT? ‚Äì Experimenting with LLMs</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
</style>


<script src="../../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../../site_libs/clipboard/clipboard.min.js"></script>
<script src="../../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../../site_libs/quarto-search/fuse.min.js"></script>
<script src="../../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../../">
<script src="../../site_libs/quarto-html/quarto.js" type="module"></script>
<script src="../../site_libs/quarto-html/tabsets/tabsets.js" type="module"></script>
<script src="../../site_libs/quarto-html/popper.min.js"></script>
<script src="../../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../../site_libs/quarto-html/anchor.min.js"></script>
<link href="../../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../../site_libs/quarto-html/quarto-syntax-highlighting-e1a5c8363afafaef2c763b6775fbf3ca.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../../site_libs/bootstrap/bootstrap-6bedb5bfd5db10c551c243252fe0aef6.min.css" rel="stylesheet" append-hash="true" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>


<link rel="stylesheet" href="../../styles.css">
</head>

<body class="nav-fixed fullcontent quarto-light">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top quarto-banner">
    <nav class="navbar navbar-expand-lg " data-bs-theme="dark">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container mx-auto">
    <a class="navbar-brand" href="../../index.html">
    <span class="navbar-title">Experimenting with LLMs</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" role="menu" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll ms-auto">
  <li class="nav-item">
    <a class="nav-link" href="../../about.html"> 
<span class="menu-text">About Miranda‚Äôs Page</span></a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="https://github.com/"> <i class="bi bi-github" role="img">
</i> 
<span class="menu-text"></span></a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="https://twitter.com"> <i class="bi bi-twitter" role="img">
</i> 
<span class="menu-text"></span></a>
  </li>  
</ul>
          </div> <!-- /navcollapse -->
            <div class="quarto-navbar-tools">
</div>
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<header id="title-block-header" class="quarto-title-block default page-columns page-full">
  <div class="quarto-title-banner page-columns page-full">
    <div class="quarto-title column-body">
      <h1 class="title">Riddle Me This: How Good is Your Puzzle Solving, ChatGPT?</h1>
                  <div>
        <div class="description">
          Prompting Different LLMs to Solve Various Puzzle Challenges
        </div>
      </div>
                          <div class="quarto-categories">
                <div class="quarto-category">LLMs</div>
                <div class="quarto-category">puzzles</div>
              </div>
                  </div>
  </div>
    
  
  <div class="quarto-title-meta">

      <div>
      <div class="quarto-title-meta-heading">Author</div>
      <div class="quarto-title-meta-contents">
               <p>Miranda Schriver </p>
            </div>
    </div>
      
      <div>
      <div class="quarto-title-meta-heading">Published</div>
      <div class="quarto-title-meta-contents">
        <p class="date">March 23, 2025</p>
      </div>
    </div>
    
      
    </div>
    
  
  </header><div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    
<!-- main -->
<main class="content quarto-banner-title-block" id="quarto-document-content">





<p><img src="img1.webp" width="60%"></p>
<section id="natural-language-processors-generators" class="level2">
<h2 class="anchored" data-anchor-id="natural-language-processors-generators">Natural Language Processors &amp; Generators</h2>
<p>As we‚Äôve come to realize, LLMs are known for their ability to mimic human-like text generation and natural language processing-because they are trained on vasts amount of text data generated by human. This allows them to execute a variety of tasks that involve creative capacity with the utmost amount of accuracy.</p>
<p>Knowing how well LLM‚Äôs have come in being able to analyze text and generate natural language, I thought it would be interesting to test how well one LLM can solve text-based puzzle‚Ä¶generated by another LLM!</p>
</section>
<section id="crossword-puzzles" class="level2">
<h2 class="anchored" data-anchor-id="crossword-puzzles">Crossword Puzzles!</h2>
<p>One way in which LLMs can be tested on their language processing abilities is through cross word puzzles, considering this is one of the most popular word-based games out there. The experiment here involved asking one LLM to generate its own puzzle, and then prompting either the same LLM (in a different chat log) to fill out its own puzzle, or another LLM to see what answers it might give.</p>
<p>-After prompting ChatGPT to ‚Äúproduce a sample cross word puzzle‚Äù for me, it spit out the following:</p>
<section id="chatgpt" class="level3">
<h3 class="anchored" data-anchor-id="chatgpt">ChatGPT:</h3>
<p>Sure! Here‚Äôs a small sample <strong>crossword puzzle</strong> (5x5 grid) with clues. Let me know if you‚Äôd like a different theme, size, or difficulty level.</p>
<hr>
</section>
<section id="crossword-grid" class="level3">
<h3 class="anchored" data-anchor-id="crossword-grid">üß© Crossword Grid</h3>
<pre><code>1 A P P L E
2 B _ _ _ _
3 C _ _ _ _
4 H _ _ _ _
5 E _ _ _ _</code></pre>
<hr>
</section>
<section id="clues" class="level3">
<h3 class="anchored" data-anchor-id="clues">Clues</h3>
<p><strong>ACROSS</strong></p>
<ol type="1">
<li>A fruit that‚Äôs also a tech giant.</li>
<li>A buzzing insect.</li>
<li>Opposite of hot.</li>
<li>Laugh out loud (abbr.).</li>
<li>Fifth vowel.</li>
</ol>
<p><strong>DOWN</strong></p>
<ol type="1">
<li>First letter of the alphabet.</li>
<li>Bread ingredient.</li>
<li>Opposite of night.</li>
<li>Giggle sound.</li>
<li>Evergreen tree.</li>
</ol>
<p>Great, it followed exactly my directions and created a simple enough puzzle!‚Ä¶.Except the puzzle isn‚Äôt exactly solvable with real words. To spoil the answers ahead of time for the sake of this blog and experiment, here is what the crossword would be filled out:</p>
<p>Of course! Here‚Äôs the <strong>completed crossword puzzle</strong> with the answers filled in:</p>
<hr>
</section>
<section id="filled-crossword-grid" class="level3">
<h3 class="anchored" data-anchor-id="filled-crossword-grid">‚úÖ Filled Crossword Grid</h3>
<pre><code>1 A P P L E
2 B E E S _
3 C O L D _
4 H A H A _
5 E L M S _</code></pre>
<hr>
</section>
<section id="clue-solutions" class="level3">
<h3 class="anchored" data-anchor-id="clue-solutions">Clue Solutions</h3>
<p><strong>ACROSS</strong></p>
<ol type="1">
<li>APPLE ‚Äì A fruit that‚Äôs also a tech giant.</li>
<li>BEES ‚Äì A buzzing insect.</li>
<li>COLD ‚Äì Opposite of hot.</li>
<li>HAHA ‚Äì Laugh out loud (abbr.).</li>
<li>ELMS ‚Äì Fifth vowel (E) + plural of an evergreen tree.</li>
</ol>
<p><strong>DOWN</strong></p>
<ol type="1">
<li>ABCDE (starting letters: A, B, C, H, E)</li>
<li>PEEL ‚Äì Bread ingredient (loose clue, better might be ‚ÄúOuter skin of fruit‚Äù).</li>
<li>PLEA ‚Äì Opposite of night clue here would better match ‚ÄúDAY‚Äù (COLD doesn‚Äôt fit well).</li>
<li>LEAD ‚Äì ‚ÄúGiggle sound‚Äù clue better as ‚ÄúHAHA‚Äù.</li>
<li>ELMS ‚Äì Evergreen tree (fits well).</li>
</ol>
<hr>
<ul>
<li>Or, at least I should specify that while the ‚ÄúAcross‚Äù words make sense (more or less), the ‚ÄúDown‚Äù words were not as convincing‚Ä¶</li>
</ul>
<p>So in this respect, I am sort of cheating and not exactly throwing the LLM‚Äôs a bone in terms of being able to solve this puzzle neatly. That being said, it‚Äôs still interesting to see this experiment as testing the ability of LLMs to evaluate recycled information (a.k.a. the original crossword that an LLM processed and produced) given by their own operating systems.</p>
<blockquote class="blockquote">
<p>It‚Äôs also interesting to note how the LLM did a good job of creating a crossword puzzle with a correct, neat set of words and clues across, however failed to do so for the ‚Äúdown‚Äù clues‚Ä¶</p>
</blockquote>
</section>
</section>
<section id="first-try-same-llm-different-chat-log" class="level2">
<h2 class="anchored" data-anchor-id="first-try-same-llm-different-chat-log">First Try: Same LLM, Different Chat Log</h2>
<p>Here‚Äôs what Chat generates when prompted to solve the cross word.</p>
<section id="chatgpt-log" class="level3">
<h3 class="anchored" data-anchor-id="chatgpt-log">ChatGPT Log:</h3>
<p>Sure! Let‚Äôs solve the crossword based on the clues:</p>
<hr>
</section>
<section id="filled-crossword-grid-1" class="level3">
<h3 class="anchored" data-anchor-id="filled-crossword-grid-1">‚úÖ Filled Crossword Grid</h3>
<pre><code>1 A P P L E
2 B E E S _
3 C O L D _
4 H A H A _
5 E U Y U _</code></pre>
<hr>
</section>
<section id="clue-solutions-1" class="level3">
<h3 class="anchored" data-anchor-id="clue-solutions-1">üîç Clue Solutions</h3>
<p><strong>ACROSS</strong></p>
<ol type="1">
<li><strong>APPLE</strong> ‚Äì A fruit that‚Äôs also a tech giant.</li>
<li><strong>BEES</strong> ‚Äì A buzzing insect.</li>
<li><strong>COLD</strong> ‚Äì Opposite of hot.</li>
<li><strong>HAHA</strong> ‚Äì Laugh out loud (abbr. or expression).</li>
<li><strong>E</strong> ‚Äì Fifth vowel.</li>
</ol>
<p><strong>DOWN</strong></p>
<ol type="1">
<li><p><strong>ABCHE</strong> ‚Äì First letters: A (from 1A), B (from 2A), C (from 3A), H (from 4A), E (from 5A). So:</p>
<ul>
<li>1D: <strong>A</strong> ‚Äì First letter of the alphabet.</li>
</ul></li>
<li><p><strong>PELUU</strong> (but we need something that fits ‚ÄúBread ingredient‚Äù): Let‚Äôs revise 2A and 2D. Bread ingredient could be <strong>EGGS</strong> or <strong>FLOUR</strong> ‚Äì let‚Äôs use <strong>FLOUR</strong>, making 2A ‚ÄúBREAD‚Äù maybe? But that would contradict ‚Äúbuzzing insect.‚Äù</p></li>
</ol>
<p>Let‚Äôs rework the grid with better consistency. Here‚Äôs a corrected version that makes all clues fit:</p>
<hr>
</section>
<section id="corrected-crossword-grid" class="level3">
<h3 class="anchored" data-anchor-id="corrected-crossword-grid">üß© Corrected Crossword Grid</h3>
<pre><code>1 A P P L E
2 B E E S _
3 C O L D _
4 H A H A _
5 E I E W _</code></pre>
<hr>
</section>
<section id="final-clue-answers" class="level3">
<h3 class="anchored" data-anchor-id="final-clue-answers">Final Clue Answers</h3>
<p><strong>ACROSS</strong></p>
<ol type="1">
<li><strong>APPLE</strong> ‚Äì Fruit / tech giant</li>
<li><strong>BEES</strong> ‚Äì Buzzing insects</li>
<li><strong>COLD</strong> ‚Äì Opposite of hot</li>
<li><strong>HAHA</strong> ‚Äì Laugh sound</li>
<li><strong>E</strong> ‚Äì Fifth vowel</li>
</ol>
<p><strong>DOWN</strong></p>
<ol type="1">
<li><strong>A</strong> ‚Äì First letter of the alphabet</li>
<li><strong>PEIHI</strong> ‚Äì Hmm‚Ä¶ that doesn‚Äôt make sense.</li>
</ol>
<p>To truly make all the <strong>Down</strong> clues work (especially 2D: ‚ÄúBread ingredient‚Äù and 5D: ‚ÄúEvergreen tree‚Äù), we‚Äôll need a slightly adjusted grid. Would you like me to redesign the puzzle so all clues align perfectly?</p>
<hr>
</section>
<section id="what-to-glean-from-this-attempt" class="level3">
<h3 class="anchored" data-anchor-id="what-to-glean-from-this-attempt">What to glean from this attempt:</h3>
<ul>
<li>Here, it notes the first time that there were errors in its attempts, and by the second attempt it re-evaluates the puzzle almost entirely (noting for instance by the second clue with ‚ÄúPEIHI‚Ä¶‚Äù that it doesn‚Äôt make sense at all!)</li>
</ul>
</section>
<section id="lets-try-a-different-llm-and-see-how-well-it-does-claude" class="level3">
<h3 class="anchored" data-anchor-id="lets-try-a-different-llm-and-see-how-well-it-does-claude">Let‚Äôs try a different LLM and see how well it does‚Ä¶ (Claude)</h3>
<p>I‚Äôll solve this crossword puzzle for you! Let me work through the clues one by one.</p>
<p>Looking at what we already have: - 1 ACROSS: APPLE (a fruit that‚Äôs also a tech giant) - already filled in - 1 DOWN: A (first letter of the alphabet) - already filled in</p>
<p>Let me solve the remaining clues:</p>
<p><strong>ACROSS:</strong> - 2. A buzzing insect ‚Üí BEE - 3. Opposite of hot ‚Üí COLD - 4. Laugh out loud (abbr.) ‚Üí LOL - 5. Fifth vowel ‚Üí U</p>
<p><strong>DOWN:</strong> - 2. Bread ingredient ‚Üí FLOUR (but we only need ‚ÄòP‚Äô from this word) - 3. Opposite of night ‚Üí DAY - 4. Giggle sound ‚Üí LAUGH (but we only need ‚ÄòL‚Äô from this word) - 5. Evergreen tree ‚Üí PINE (but we only need ‚ÄòE‚Äô from this word)</p>
<p>Now I‚Äôll fill in the completed grid:</p>
<pre><code>1 A P P L E
2 B E E P E
3 C O L D E
4 L O L L E
5 U R D E E</code></pre>
<p>However, I notice some inconsistencies when checking this solution. Let me verify each position:</p>
<ul>
<li>Row 2: B is correct, and BEE works for ‚Äúbuzzing insect,‚Äù but not all down clues fit.</li>
<li>Row 3: C is correct, and COLD works for ‚Äúopposite of hot.‚Äù</li>
<li>Row 4: The down clues aren‚Äôt aligning correctly.</li>
</ul>
<p>Let me reconsider the down clues to ensure everything aligns properly. I think we need to be more precise with the down answers to match all intersections.</p>
<p>Let‚Äôs revise: - 2 DOWN: Bread ingredient that starts with ‚ÄòP‚Äô ‚Üí FLOUR doesn‚Äôt work. It should be PASTA or PASTE - 3 DOWN: Opposite of night that starts with ‚ÄòP‚Äô ‚Üí DAY doesn‚Äôt work. It should be PM (evening) - 4 DOWN: Giggle sound that starts with ‚ÄòL‚Äô ‚Üí LAUGH works partially - 5 DOWN: Evergreen tree that starts with ‚ÄòE‚Äô ‚Üí PINE doesn‚Äôt work. It should be ELM</p>
<p>The completed grid should be:</p>
<pre><code>1 A P P L E
2 B E E P E
3 C O L D E
4 H A H A E
5 E W E E E</code></pre>
<p>Wait, this still doesn‚Äôt fully align. Let me solve this more carefully by considering both across and down clues simultaneously:</p>
<pre><code>1 A P P L E
2 B E E P E
3 C O L D E
4 L O L L E
5 U E E E E</code></pre>
<p>This solution satisfies all the clues: - APPLE: fruit/tech giant - BEE: buzzing insect - COLD: opposite of hot - LOL: laugh out loud abbreviation - U: fifth vowel - A: first letter of alphabet - P: from PASTE (bread ingredient) - P: from PM (opposite of night/day) - L: from LAUGH (giggle sound) - E: from PINE (evergreen tree)</p>
<p><strong>Similarly</strong>‚Ä¶ Claude ran into trouble with the down clues, and makes several attempts to try and figure it out. It‚Äôs intersting how, because this information is outside of its training data and has to come up with its own creative answer, it ends up having trouble doing so!</p>
<section id="conclusion" class="level4">
<h4 class="anchored" data-anchor-id="conclusion">Conclusion‚Ä¶</h4>
<p>This illustrates one of the limits to LLM‚Äôs creative ability, and perhaps going forward it will come up with better solutions through more highly developed algorithms and training data to figure out a better answer‚Ä¶however what is still impressive is its ability to acknowledge the issues with the faulty cross word puzzle to begin with!</p>


</section>
</section>
</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
  window.document.addEventListener("DOMContentLoaded", function (event) {
    const icon = "Óßã";
    const anchorJS = new window.AnchorJS();
    anchorJS.options = {
      placement: 'right',
      icon: icon
    };
    anchorJS.add('.anchored');
    const isCodeAnnotation = (el) => {
      for (const clz of el.classList) {
        if (clz.startsWith('code-annotation-')) {                     
          return true;
        }
      }
      return false;
    }
    const onCopySuccess = function(e) {
      // button target
      const button = e.trigger;
      // don't keep focus
      button.blur();
      // flash "checked"
      button.classList.add('code-copy-button-checked');
      var currentTitle = button.getAttribute("title");
      button.setAttribute("title", "Copied!");
      let tooltip;
      if (window.bootstrap) {
        button.setAttribute("data-bs-toggle", "tooltip");
        button.setAttribute("data-bs-placement", "left");
        button.setAttribute("data-bs-title", "Copied!");
        tooltip = new bootstrap.Tooltip(button, 
          { trigger: "manual", 
            customClass: "code-copy-button-tooltip",
            offset: [0, -8]});
        tooltip.show();    
      }
      setTimeout(function() {
        if (tooltip) {
          tooltip.hide();
          button.removeAttribute("data-bs-title");
          button.removeAttribute("data-bs-toggle");
          button.removeAttribute("data-bs-placement");
        }
        button.setAttribute("title", currentTitle);
        button.classList.remove('code-copy-button-checked');
      }, 1000);
      // clear code selection
      e.clearSelection();
    }
    const getTextToCopy = function(trigger) {
        const codeEl = trigger.previousElementSibling.cloneNode(true);
        for (const childEl of codeEl.children) {
          if (isCodeAnnotation(childEl)) {
            childEl.remove();
          }
        }
        return codeEl.innerText;
    }
    const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
      text: getTextToCopy
    });
    clipboard.on('success', onCopySuccess);
    if (window.document.getElementById('quarto-embedded-source-code-modal')) {
      const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
        text: getTextToCopy,
        container: window.document.getElementById('quarto-embedded-source-code-modal')
      });
      clipboardModal.on('success', onCopySuccess);
    }
      var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
      var mailtoRegex = new RegExp(/^mailto:/);
        var filterRegex = new RegExp("https:\/\/mschri\.github\.io\/comm4190_S25_Using_LLMs_Blog\/");
      var isInternal = (href) => {
          return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
      }
      // Inspect non-navigation links and adorn them if external
     var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
      for (var i=0; i<links.length; i++) {
        const link = links[i];
        if (!isInternal(link.href)) {
          // undo the damage that might have been done by quarto-nav.js in the case of
          // links that we want to consider external
          if (link.dataset.originalHref !== undefined) {
            link.href = link.dataset.originalHref;
          }
        }
      }
    function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
      const config = {
        allowHTML: true,
        maxWidth: 500,
        delay: 100,
        arrow: false,
        appendTo: function(el) {
            return el.parentElement;
        },
        interactive: true,
        interactiveBorder: 10,
        theme: 'quarto',
        placement: 'bottom-start',
      };
      if (contentFn) {
        config.content = contentFn;
      }
      if (onTriggerFn) {
        config.onTrigger = onTriggerFn;
      }
      if (onUntriggerFn) {
        config.onUntrigger = onUntriggerFn;
      }
      window.tippy(el, config); 
    }
    const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
    for (var i=0; i<noterefs.length; i++) {
      const ref = noterefs[i];
      tippyHover(ref, function() {
        // use id or data attribute instead here
        let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
        try { href = new URL(href).hash; } catch {}
        const id = href.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note) {
          return note.innerHTML;
        } else {
          return "";
        }
      });
    }
    const xrefs = window.document.querySelectorAll('a.quarto-xref');
    const processXRef = (id, note) => {
      // Strip column container classes
      const stripColumnClz = (el) => {
        el.classList.remove("page-full", "page-columns");
        if (el.children) {
          for (const child of el.children) {
            stripColumnClz(child);
          }
        }
      }
      stripColumnClz(note)
      if (id === null || id.startsWith('sec-')) {
        // Special case sections, only their first couple elements
        const container = document.createElement("div");
        if (note.children && note.children.length > 2) {
          container.appendChild(note.children[0].cloneNode(true));
          for (let i = 1; i < note.children.length; i++) {
            const child = note.children[i];
            if (child.tagName === "P" && child.innerText === "") {
              continue;
            } else {
              container.appendChild(child.cloneNode(true));
              break;
            }
          }
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(container);
          }
          return container.innerHTML
        } else {
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(note);
          }
          return note.innerHTML;
        }
      } else {
        // Remove any anchor links if they are present
        const anchorLink = note.querySelector('a.anchorjs-link');
        if (anchorLink) {
          anchorLink.remove();
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        if (note.classList.contains("callout")) {
          return note.outerHTML;
        } else {
          return note.innerHTML;
        }
      }
    }
    for (var i=0; i<xrefs.length; i++) {
      const xref = xrefs[i];
      tippyHover(xref, undefined, function(instance) {
        instance.disable();
        let url = xref.getAttribute('href');
        let hash = undefined; 
        if (url.startsWith('#')) {
          hash = url;
        } else {
          try { hash = new URL(url).hash; } catch {}
        }
        if (hash) {
          const id = hash.replace(/^#\/?/, "");
          const note = window.document.getElementById(id);
          if (note !== null) {
            try {
              const html = processXRef(id, note.cloneNode(true));
              instance.setContent(html);
            } finally {
              instance.enable();
              instance.show();
            }
          } else {
            // See if we can fetch this
            fetch(url.split('#')[0])
            .then(res => res.text())
            .then(html => {
              const parser = new DOMParser();
              const htmlDoc = parser.parseFromString(html, "text/html");
              const note = htmlDoc.getElementById(id);
              if (note !== null) {
                const html = processXRef(id, note);
                instance.setContent(html);
              } 
            }).finally(() => {
              instance.enable();
              instance.show();
            });
          }
        } else {
          // See if we can fetch a full url (with no hash to target)
          // This is a special case and we should probably do some content thinning / targeting
          fetch(url)
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.querySelector('main.content');
            if (note !== null) {
              // This should only happen for chapter cross references
              // (since there is no id in the URL)
              // remove the first header
              if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
                note.children[0].remove();
              }
              const html = processXRef(null, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      }, function(instance) {
      });
    }
        let selectedAnnoteEl;
        const selectorForAnnotation = ( cell, annotation) => {
          let cellAttr = 'data-code-cell="' + cell + '"';
          let lineAttr = 'data-code-annotation="' +  annotation + '"';
          const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
          return selector;
        }
        const selectCodeLines = (annoteEl) => {
          const doc = window.document;
          const targetCell = annoteEl.getAttribute("data-target-cell");
          const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
          const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
          const lines = annoteSpan.getAttribute("data-code-lines").split(",");
          const lineIds = lines.map((line) => {
            return targetCell + "-" + line;
          })
          let top = null;
          let height = null;
          let parent = null;
          if (lineIds.length > 0) {
              //compute the position of the single el (top and bottom and make a div)
              const el = window.document.getElementById(lineIds[0]);
              top = el.offsetTop;
              height = el.offsetHeight;
              parent = el.parentElement.parentElement;
            if (lineIds.length > 1) {
              const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
              const bottom = lastEl.offsetTop + lastEl.offsetHeight;
              height = bottom - top;
            }
            if (top !== null && height !== null && parent !== null) {
              // cook up a div (if necessary) and position it 
              let div = window.document.getElementById("code-annotation-line-highlight");
              if (div === null) {
                div = window.document.createElement("div");
                div.setAttribute("id", "code-annotation-line-highlight");
                div.style.position = 'absolute';
                parent.appendChild(div);
              }
              div.style.top = top - 2 + "px";
              div.style.height = height + 4 + "px";
              div.style.left = 0;
              let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
              if (gutterDiv === null) {
                gutterDiv = window.document.createElement("div");
                gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
                gutterDiv.style.position = 'absolute';
                const codeCell = window.document.getElementById(targetCell);
                const gutter = codeCell.querySelector('.code-annotation-gutter');
                gutter.appendChild(gutterDiv);
              }
              gutterDiv.style.top = top - 2 + "px";
              gutterDiv.style.height = height + 4 + "px";
            }
            selectedAnnoteEl = annoteEl;
          }
        };
        const unselectCodeLines = () => {
          const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
          elementsIds.forEach((elId) => {
            const div = window.document.getElementById(elId);
            if (div) {
              div.remove();
            }
          });
          selectedAnnoteEl = undefined;
        };
          // Handle positioning of the toggle
      window.addEventListener(
        "resize",
        throttle(() => {
          elRect = undefined;
          if (selectedAnnoteEl) {
            selectCodeLines(selectedAnnoteEl);
          }
        }, 10)
      );
      function throttle(fn, ms) {
      let throttle = false;
      let timer;
        return (...args) => {
          if(!throttle) { // first call gets through
              fn.apply(this, args);
              throttle = true;
          } else { // all the others get throttled
              if(timer) clearTimeout(timer); // cancel #2
              timer = setTimeout(() => {
                fn.apply(this, args);
                timer = throttle = false;
              }, ms);
          }
        };
      }
        // Attach click handler to the DT
        const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
        for (const annoteDlNode of annoteDls) {
          annoteDlNode.addEventListener('click', (event) => {
            const clickedEl = event.target;
            if (clickedEl !== selectedAnnoteEl) {
              unselectCodeLines();
              const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
              if (activeEl) {
                activeEl.classList.remove('code-annotation-active');
              }
              selectCodeLines(clickedEl);
              clickedEl.classList.add('code-annotation-active');
            } else {
              // Unselect the line
              unselectCodeLines();
              clickedEl.classList.remove('code-annotation-active');
            }
          });
        }
    const findCites = (el) => {
      const parentEl = el.parentElement;
      if (parentEl) {
        const cites = parentEl.dataset.cites;
        if (cites) {
          return {
            el,
            cites: cites.split(' ')
          };
        } else {
          return findCites(el.parentElement)
        }
      } else {
        return undefined;
      }
    };
    var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
    for (var i=0; i<bibliorefs.length; i++) {
      const ref = bibliorefs[i];
      const citeInfo = findCites(ref);
      if (citeInfo) {
        tippyHover(citeInfo.el, function() {
          var popup = window.document.createElement('div');
          citeInfo.cites.forEach(function(cite) {
            var citeDiv = window.document.createElement('div');
            citeDiv.classList.add('hanging-indent');
            citeDiv.classList.add('csl-entry');
            var biblioDiv = window.document.getElementById('ref-' + cite);
            if (biblioDiv) {
              citeDiv.innerHTML = biblioDiv.innerHTML;
            }
            popup.appendChild(citeDiv);
          });
          return popup.innerHTML;
        });
      }
    }
  });
  </script>
</div> <!-- /content -->




</body></html>